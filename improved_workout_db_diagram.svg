<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-size="24" font-weight="bold">Workout App Database Architecture</text>
  
  <!-- Master Data Section -->
  <rect x="50" y="60" width="500" height="40" fill="#4A90E2" stroke="#2E5C8A" stroke-width="2"/>
  <text x="300" y="85" text-anchor="middle" fill="white" font-size="16" font-weight="bold">MASTER DATA (Shared Across All Users)</text>
  
  <!-- Exercise Table -->
  <rect x="50" y="120" width="240" height="180" fill="#E8F0FE" stroke="#4A90E2" stroke-width="2" rx="5"/>
  <rect x="50" y="120" width="240" height="30" fill="#4A90E2"/>
  <text x="170" y="140" text-anchor="middle" fill="white" font-weight="bold">exercises</text>
  <text x="60" y="170" font-size="12" fill="#D2691E" font-weight="bold">ðŸ”‘ exerciseId (string) - PK</text>
  <text x="60" y="190" font-size="12">name</text>
  <text x="60" y="210" font-size="12">category (compound/isolation)</text>
  <text x="60" y="230" font-size="12">primaryMuscle</text>
  <text x="60" y="250" font-size="12">secondaryMuscles</text>
  <text x="60" y="270" font-size="12">equipment</text>
  <text x="60" y="290" font-size="12">instructions</text>
  
  <!-- Workout Template Table -->
  <rect x="310" y="120" width="240" height="140" fill="#E8F0FE" stroke="#4A90E2" stroke-width="2" rx="5"/>
  <rect x="310" y="120" width="240" height="30" fill="#4A90E2"/>
  <text x="430" y="140" text-anchor="middle" fill="white" font-weight="bold">workout_templates</text>
  <text x="320" y="170" font-size="12" fill="#D2691E" font-weight="bold">ðŸ”‘ templateId (int) - PK</text>
  <text x="320" y="190" font-size="12">dayName (Monday - Push Day)</text>
  <text x="320" y="210" font-size="12">dayNumber (1-6)</text>
  <text x="320" y="230" font-size="12">workoutType (push/pull/legs)</text>
  <text x="320" y="250" font-size="12">description</text>
  
  <!-- Template Exercises Table -->
  <rect x="180" y="340" width="240" height="180" fill="#E8F0FE" stroke="#4A90E2" stroke-width="2" rx="5"/>
  <rect x="180" y="340" width="240" height="30" fill="#4A90E2"/>
  <text x="300" y="360" text-anchor="middle" fill="white" font-weight="bold">template_exercises</text>
  <text x="190" y="390" font-size="12" fill="#D2691E" font-weight="bold">ðŸ”‘ templateExerciseId - PK</text>
  <text x="190" y="410" font-size="12" fill="#8B0000" font-weight="bold">ðŸ”— templateId - FK</text>
  <text x="190" y="430" font-size="12" fill="#8B0000" font-weight="bold">ðŸ”— exerciseId - FK</text>
  <text x="190" y="450" font-size="12">orderInWorkout</text>
  <text x="190" y="470" font-size="12">defaultSets</text>
  <text x="190" y="490" font-size="12">defaultReps</text>
  <text x="190" y="510" font-size="12">defaultRestSeconds</text>
  
  <!-- User Data Section -->
  <rect x="600" y="60" width="550" height="40" fill="#E85D75" stroke="#B83E5A" stroke-width="2"/>
  <text x="875" y="85" text-anchor="middle" fill="white" font-size="16" font-weight="bold">USER-SPECIFIC DATA</text>
  
  <!-- Users Table -->
  <rect x="600" y="120" width="200" height="100" fill="#FFE5E9" stroke="#E85D75" stroke-width="2" rx="5"/>
  <rect x="600" y="120" width="200" height="30" fill="#E85D75"/>
  <text x="700" y="140" text-anchor="middle" fill="white" font-weight="bold">users</text>
  <text x="610" y="170" font-size="12" fill="#D2691E" font-weight="bold">ðŸ”‘ userId - PK</text>
  <text x="610" y="190" font-size="12">name</text>
  <text x="610" y="210" font-size="12">createdAt</text>
  
  <!-- User Exercise Settings -->
  <rect x="450" y="250" width="240" height="160" fill="#FFE5E9" stroke="#E85D75" stroke-width="2" rx="5"/>
  <rect x="450" y="250" width="240" height="30" fill="#E85D75"/>
  <text x="570" y="270" text-anchor="middle" fill="white" font-weight="bold">user_exercise_settings</text>
  <text x="460" y="300" font-size="12" fill="#D2691E" font-weight="bold">ðŸ”‘ settingId - PK</text>
  <text x="460" y="320" font-size="12" fill="#8B0000" font-weight="bold">ðŸ”— userId - FK</text>
  <text x="460" y="340" font-size="12" fill="#8B0000" font-weight="bold">ðŸ”— templateExerciseId - FK</text>
  <text x="460" y="360" font-size="12">customSets (nullable)</text>
  <text x="460" y="380" font-size="12">customReps (nullable)</text>
  <text x="460" y="400" font-size="12">customRestSeconds (nullable)</text>
  
  <!-- Workout History Section -->
  <rect x="820" y="120" width="330" height="40" fill="#52B788" stroke="#2D6A4F" stroke-width="2"/>
  <text x="985" y="145" text-anchor="middle" fill="white" font-size="14" font-weight="bold">WORKOUT HISTORY</text>
  
  <!-- Workout Sessions -->
  <rect x="820" y="170" width="220" height="140" fill="#D8F3DC" stroke="#52B788" stroke-width="2" rx="5"/>
  <rect x="820" y="170" width="220" height="30" fill="#52B788"/>
  <text x="930" y="190" text-anchor="middle" fill="white" font-weight="bold">workout_sessions</text>
  <text x="830" y="220" font-size="12" fill="#D2691E" font-weight="bold">ðŸ”‘ sessionId - PK</text>
  <text x="830" y="240" font-size="12" fill="#8B0000" font-weight="bold">ðŸ”— userId - FK</text>
  <text x="830" y="260" font-size="12" fill="#8B0000" font-weight="bold">ðŸ”— templateId - FK</text>
  <text x="830" y="280" font-size="12">sessionDate</text>
  <text x="830" y="300" font-size="12">totalDurationMinutes</text>
  
  <!-- Exercise Performance -->
  <rect x="720" y="340" width="220" height="120" fill="#D8F3DC" stroke="#52B788" stroke-width="2" rx="5"/>
  <rect x="720" y="340" width="220" height="30" fill="#52B788"/>
  <text x="830" y="360" text-anchor="middle" fill="white" font-weight="bold">exercise_performances</text>
  <text x="730" y="390" font-size="12" fill="#D2691E" font-weight="bold">ðŸ”‘ performanceId - PK</text>
  <text x="730" y="410" font-size="12" fill="#8B0000" font-weight="bold">ðŸ”— sessionId - FK</text>
  <text x="730" y="430" font-size="12" fill="#8B0000" font-weight="bold">ðŸ”— exerciseId - FK</text>
  <text x="730" y="450" font-size="12">totalTimeSeconds</text>
  
  <!-- Set Performance -->
  <rect x="960" y="340" width="190" height="120" fill="#D8F3DC" stroke="#52B788" stroke-width="2" rx="5"/>
  <rect x="960" y="340" width="190" height="30" fill="#52B788"/>
  <text x="1055" y="360" text-anchor="middle" fill="white" font-weight="bold">set_performances</text>
  <text x="970" y="390" font-size="12" fill="#D2691E" font-weight="bold">ðŸ”‘ setId - PK</text>
  <text x="970" y="410" font-size="12" fill="#8B0000" font-weight="bold">ðŸ”— performanceId - FK</text>
  <text x="970" y="430" font-size="12">repsCompleted</text>
  <text x="970" y="450" font-size="12">timeSeconds</text>
  
  <!-- Field-to-Field Relationships with clearer arrows -->
  <!-- Exercise.exerciseId to template_exercises.exerciseId -->
  <line x1="170" y1="170" x2="170" y2="330" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="170" y1="330" x2="270" y2="330" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="270" y1="330" x2="270" y2="430" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#fk-arrow)"/>
  
  <!-- workout_templates.templateId to template_exercises.templateId -->
  <line x1="430" y1="170" x2="430" y2="330" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="430" y1="330" x2="350" y2="330" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="350" y1="330" x2="350" y2="410" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#fk-arrow)"/>
  
  <!-- template_exercises.templateExerciseId to user_exercise_settings.templateExerciseId -->
  <line x1="420" y1="390" x2="440" y2="390" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="440" y1="390" x2="440" y2="340" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#fk-arrow)"/>
  
  <!-- users.userId to user_exercise_settings.userId -->
  <line x1="610" y1="170" x2="580" y2="170" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="580" y1="170" x2="580" y2="320" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#fk-arrow)"/>
  
  <!-- users.userId to workout_sessions.userId -->
  <line x1="700" y1="170" x2="760" y2="170" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="760" y1="170" x2="760" y2="240" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="760" y1="240" x2="830" y2="240" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#fk-arrow)"/>
  
  <!-- workout_templates.templateId to workout_sessions.templateId -->
  <line x1="530" y1="170" x2="780" y2="170" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="780" y1="170" x2="780" y2="260" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="780" y1="260" x2="830" y2="260" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#fk-arrow)"/>
  
  <!-- workout_sessions.sessionId to exercise_performances.sessionId -->
  <line x1="930" y1="220" x2="930" y2="330" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="930" y1="330" x2="850" y2="330" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="850" y1="330" x2="850" y2="410" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#fk-arrow)"/>
  
  <!-- exercises.exerciseId to exercise_performances.exerciseId -->
  <line x1="290" y1="170" x2="650" y2="170" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="650" y1="170" x2="650" y2="430" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="650" y1="430" x2="730" y2="430" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#fk-arrow)"/>
  
  <!-- exercise_performances.performanceId to set_performances.performanceId -->
  <line x1="940" y1="390" x2="970" y2="390" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="970" y1="390" x2="970" y2="410" stroke="#D2691E" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#fk-arrow)"/>
  
  <!-- Arrow marker definitions -->
  <defs>
    <marker id="fk-arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8B0000"/>
    </marker>
  </defs>
  
  <!-- Legend -->
  <rect x="50" y="560" width="350" height="120" fill="#F8F9FA" stroke="#333" stroke-width="1" rx="5"/>
  <text x="225" y="580" text-anchor="middle" font-weight="bold">Legend</text>
  <rect x="60" y="590" width="30" height="15" fill="#4A90E2"/>
  <text x="100" y="602" font-size="12">Master Data (Shared)</text>
  <rect x="60" y="610" width="30" height="15" fill="#E85D75"/>
  <text x="100" y="622" font-size="12">User-Specific Data</text>
  <rect x="60" y="630" width="30" height="15" fill="#52B788"/>
  <text x="100" y="642" font-size="12">Workout History</text>
  <text x="60" y="662" font-size="12" fill="#D2691E" font-weight="bold">ðŸ”‘ Primary Key (PK)</text>
  <text x="200" y="662" font-size="12" fill="#8B0000" font-weight="bold">ðŸ”— Foreign Key (FK)</text>
  
  <!-- Key Points -->
  <rect x="420" y="560" width="730" height="120" fill="#F8F9FA" stroke="#333" stroke-width="1" rx="5"/>
  <text x="785" y="580" text-anchor="middle" font-weight="bold">Key Architecture Points</text>
  <text x="430" y="600" font-size="12">â€¢ Master data (exercises, templates) is shared across all users - no duplication</text>
  <text x="430" y="620" font-size="12">â€¢ User settings only store customizations (nulls = use defaults)</text>
  <text x="430" y="640" font-size="12">â€¢ History tables preserve all workout data without affecting templates</text>
  <text x="430" y="660" font-size="12">â€¢ Dashed lines show PKâ†’FK relationships (arrow points to FK field)</text>
</svg>